!function(){"use strict";window.fpExpAdmin=window.fpExpAdmin||{},window.fpExpAdmin.initGalleryControls=function(e){const t=e.querySelectorAll("[data-fp-gallery-control]");t.length&&t.forEach(e=>{const t=e.querySelector("[data-fp-gallery-button]"),n=e.querySelector("[data-fp-gallery-input]"),l=e.querySelector("[data-fp-gallery-list]");e.querySelector("[data-fp-gallery-remove]");t&&n&&(t.addEventListener("click",function(e){if(e.preventDefault(),window.wp&&window.wp.media){const e=window.wp.media({title:window.fpExpAdmin.getString("Select Gallery Images"),button:{text:window.fpExpAdmin.getString("Add to Gallery")},multiple:!0});e.on("select",function(){!function(e,t,n){const l=t.value?t.value.split(",").map(e=>parseInt(e)):[];e.forEach(e=>{l.includes(e.id)||(l.push(e.id),function(e,t){const n=document.createElement("div");n.className="fp-exp-gallery-control__item",n.setAttribute("data-fp-gallery-item",e.id),n.innerHTML=`\n            <div class="fp-exp-gallery-control__thumb">\n                <img src="${e.sizes?.thumbnail?.url||e.url}" alt="${e.alt||""}">\n            </div>\n            <div class="fp-exp-gallery-control__toolbar">\n                <button type="button" class="fp-exp-gallery-control__remove" data-fp-gallery-remove-item>\n                    <span aria-hidden="true">Ã—</span>\n                </button>\n            </div>\n        `,t.appendChild(n)}(e,n))}),t.value=l.join(",")}(e.state().get("selection").toJSON(),n,l)}),e.open()}}),l&&l.addEventListener("click",function(e){if(e.target.matches("[data-fp-gallery-remove-item]")){e.preventDefault();const t=e.target.closest("[data-fp-gallery-item]");t&&function(e,t){const n=parseInt(e.getAttribute("data-fp-gallery-item")),l=t.value?t.value.split(",").map(e=>parseInt(e)):[],a=l.filter(e=>e!==n);t.value=a.join(","),e.remove()}(t,n)}}))})}}();