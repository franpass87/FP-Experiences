!function(){"use strict";window.fpExpAdmin=window.fpExpAdmin||{},window.fpExpAdmin.initRepeaters=function(e){const t=e.querySelectorAll("[data-fp-repeater]");t.length&&t.forEach(e=>{const t=e.querySelector("[data-fp-repeater-add]"),r=e.querySelector("[data-fp-repeater-list]"),n=e.querySelector("[data-fp-repeater-template]");t&&r&&n&&(t.addEventListener("click",function(e){e.preventDefault(),function(e,t){const r=t.content.cloneNode(!0),n=r.querySelector("[data-fp-repeater-item]");if(n){n.querySelectorAll("input, select, textarea").forEach(e=>{const t=e.getAttribute("name");t&&e.setAttribute("name",t.replace(/\[\d+\]/,`[${Date.now()}]`))}),e.appendChild(n)}}(r,n)}),r.addEventListener("click",function(e){if(e.target.matches("[data-fp-repeater-remove]")){e.preventDefault();const t=e.target.closest("[data-fp-repeater-item]");t&&function(e){e.remove()}(t)}}),function(e){let t=null;e.addEventListener("dragstart",function(e){e.target.matches("[data-fp-repeater-item]")&&(t=e.target,e.target.classList.add("is-dragging"))}),e.addEventListener("dragover",function(r){r.preventDefault();const n=(a=e,i=r.clientY,[...a.querySelectorAll("[data-fp-repeater-item]:not(.is-dragging)")].reduce((e,t)=>{const r=t.getBoundingClientRect(),n=i-r.top-r.height/2;return n<0&&n>e.offset?{offset:n,element:t}:e},{offset:Number.NEGATIVE_INFINITY}).element);var a,i;null==n?e.appendChild(t):e.insertBefore(t,n)}),e.addEventListener("dragend",function(e){e.target.matches("[data-fp-repeater-item]")&&(e.target.classList.remove("is-dragging"),t=null)})}(r))})}}();