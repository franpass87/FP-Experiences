!function(){"use strict";window.FPFront||(window.FPFront={});var e={widget:null,slotsEl:null,config:{}};function t(e,t){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t||"EUR"}).format(Number(e||0))}catch(t){return String(e||0)}}function a(){var e={};return document.querySelectorAll(".fp-exp-party-table tbody tr[data-ticket]").forEach(function(t){var a=t.getAttribute("data-ticket")||"",r=t.querySelector(".fp-exp-quantity__input");if(a&&r){var n=parseInt(r.value,10)||0;n>0&&(e[a]=n)}}),e}window.FPFront.summaryWoo={init:function(r){e=Object.assign(e,r||{});var n=document.querySelector(".fp-exp-summary");if(n){var i=n.querySelector("[data-fp-summary-status]"),o=n.querySelector("[data-fp-summary-body]"),c=n.querySelector("[data-fp-summary-lines]"),l=(n.querySelector("[data-fp-summary-adjustments]"),n.querySelector("[data-fp-summary-total-row]")),d=n.querySelector("[data-fp-summary-total]"),u=document.querySelector(".fp-exp-summary__cta"),p=(n.getAttribute("data-loading-label"),n.getAttribute("data-error-label"),n.getAttribute("data-empty-label")||"Seleziona i biglietti per vedere il riepilogo"),s=e.config&&e.config.currency||"EUR";u&&u.addEventListener("click",function(){}),e.widget.addEventListener("change",f),e.widget.addEventListener("input",f),e.slotsEl&&e.slotsEl.addEventListener("click",f),e.widget.addEventListener("change",function(e){e.target&&e.target.closest(".fp-exp-quantity__input")&&y(),e.target&&e.target.matches('.fp-exp-addons input[type="checkbox"]')&&y()}),e.widget.addEventListener("input",function(e){e.target&&e.target.closest(".fp-exp-quantity__input")&&y()}),e.slotsEl&&e.slotsEl.addEventListener("click",function(e){e.target&&e.target.closest(".fp-exp-slots__item")&&y()}),f(),y()}function m(e){if(i){i.hidden=!1;var t=i.querySelector(".fp-exp-summary__message");t&&(t.textContent=e||p)}o&&(o.hidden=!0)}function f(){if(u){var t=a(),r=t&&Object.keys(t).length>0,n=!(!e.slotsEl||!e.slotsEl.querySelector(".fp-exp-slots__item.is-selected"));u.disabled=!(r&&n),u.textContent=r?n?"Procedi al pagamento":"Seleziona data e orario":"Seleziona almeno 1 biglietto"}}function y(){var r,n=a(),u=(r={},document.querySelectorAll(".fp-exp-addons li[data-addon]").forEach(function(e){var t=e.getAttribute("data-addon")||"",a=e.querySelector('input[type="checkbox"]');t&&a&&a.checked&&(r[t]=1)}),r),f=e.slotsEl&&e.slotsEl.querySelector(".fp-exp-slots__item.is-selected");if(n&&0!==Object.keys(n).length)if(f){var y=0;Object.entries(n).forEach(function(e){var t=e[0],a=e[1],r=document.querySelector('tr[data-ticket="'+t+'"] .fp-exp-ticket__price[data-price]'),n=r?parseFloat(r.getAttribute("data-price")||"0"):0;y+=n*a}),Object.entries(u).forEach(function(e){var t=e[0],a=e[1],r=document.querySelector('li[data-addon="'+t+'"] .fp-exp-addon__price[data-price]'),n=r?parseFloat(r.getAttribute("data-price")||"0"):0;y+=n*a}),c&&(c.innerHTML="",Object.entries(n).forEach(function(e){var a=e[0],r=e[1];if(!(r<=0)){var n=document.querySelector('tr[data-ticket="'+a+'"] .fp-exp-ticket__price[data-price]'),i=n?parseFloat(n.getAttribute("data-price")||"0"):0,o=document.querySelector('tr[data-ticket="'+a+'"] .fp-exp-ticket__label'),l=o?o.textContent.trim():"Biglietto "+a,d=document.createElement("li");d.className="fp-exp-summary__line";var u=document.createElement("span");u.className="fp-exp-summary__line-label",u.textContent=l+" × "+r;var p=document.createElement("span");p.className="fp-exp-summary__line-amount",p.textContent=t(i*r,s),d.appendChild(u),d.appendChild(p),c.appendChild(d)}}),Object.entries(u).forEach(function(e){var a=e[0],r=e[1];if(!(r<=0)){var n=document.querySelector('li[data-addon="'+a+'"] .fp-exp-addon__price[data-price]'),i=n?parseFloat(n.getAttribute("data-price")||"0"):0,o=document.querySelector('li[data-addon="'+a+'"] .fp-exp-addon__label'),l=o?o.textContent.trim():"Extra "+a,d=document.createElement("li");d.className="fp-exp-summary__line";var u=document.createElement("span");u.className="fp-exp-summary__line-label",u.textContent=l+" × "+r;var p=document.createElement("span");p.className="fp-exp-summary__line-amount",p.textContent=t(i*r,s),d.appendChild(u),d.appendChild(p),c.appendChild(d)}})),d&&(d.textContent=t(y,s)),l&&(l.hidden=!1),i&&(i.hidden=!0),o&&(o.hidden=!1)}else m("Seleziona data e orario per vedere il prezzo");else m(p)}}}}();